Система управления питанием Флиппера представлена двумя специальными чипами - котроллером уровня заряда батареи (fuel gauge) и контроллером заряда (charger).
Главной задачей первого является отслеживание уровня заряда батареи. Это реализуется благодаря точному учету чипом количества энегрии, которое прошло в батарею и было истраченно из нее.
Контроллер заряда нужен для соблюдения требований к процессу заряда литиевой батареи, что очень важно для продления ее срока службы, а также для обеспечения безопасности при использовании устройства.

![](../../assets/applications/power-state-screenshot.png)

Приложение Power state получает информацию от этих чипов и выводит ее на экран. Давайте разберемся, что все это значит.

В строке (Current) первое число - это ток, полученный от контроллера уровня заряда, который сейчас "втекает" в батарею. Если Флиппер не подключен к внешнему источнику питания и заряд сейчас не происходит, то в этом месте будет отрицательное значение (означающее ток разряда). Значение соответствует току потребления устройства (по цепи питания батареи) в данный момент. Второе значение - это ток заряда, который расчитывается самим контроллером заряда.

Вторая строка (Voltage) содержит напряжения по цепи питания батареи, соответственно полученные от контроллера уровня заряда и от самого зарядного контроллера. Нужно отметить, что второе значение будет валидным только в процессе заряда АКБ.

Строка (Charge) содержит уровень заряда батареи в данный момент. Это значение расчитывается контроллером уровня заряда исходя из количества энергии, вошедшей в батарею и вышедшей из нее за время пользования устройством.

Далее располагаются значения оставшейся емкости и полной емкости (Capacity). Первое правильно рассчитывается, только в случае соответствия емкости фактически установленной батареи - значению полной емкости (второе число). Полная емкость задается при калибровке контроллера уровня заряда.

В последней строке выводятся значения температуры: самого контроллера уровня заряда и температура батареи. Для измерения температуры батареи используется NTC-термистор, который размещен на самом АКБ, а подключен к контролю заряда. Он изменяет свое сопротивление в зависимости от температуры батареи, таким образом позволяя ее измерить.
